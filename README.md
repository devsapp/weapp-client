## ğŸš€ ä¸€é”®éƒ¨ç½²
æ‚¨å¯ä»¥ç‚¹å‡» ç‚¹å‡»`ä¸€é”®éƒ¨ç½²`æŒ‰é’®ï¼Œè¿›è¡Œå¿«é€Ÿä½“éªŒã€‚

[![Deploy with Severless Devs](https://img.alicdn.com/imgextra/i1/O1CN01w5RFbX1v45s8TIXPz_!!6000000006118-55-tps-95-28.svg)](https://fcnext.console.aliyun.com/applications/create?template=start-weapp)

# å¾®ä¿¡å°ç¨‹åºæ¡ˆä¾‹

> å¿«é€Ÿéƒ¨ç½²å’Œä½“éªŒ Serverless æ¶æ„ä¸‹çš„ Typescript + hapi + Taro + React çš„å¾®ä¿¡å°ç¨‹åºé¡¹ç›®ã€‚

## æ‰«ç ä½“éªŒæœ€ç»ˆæ•ˆæœ

![try](https://img.alicdn.com/imgextra/i4/O1CN01anewVJ1gAlPEkkA1U_!!6000000004102-0-tps-258-258.jpg)
## æºä»£ç 

- [:octocat: æœåŠ¡ç«¯æºä»£ç ](https://github.com/devsapp/start-weapp/tree/main/src)
- [:octocat: å®¢æˆ·ç«¯æºä»£ç ](https://github.com/devsapp/weapp-client)

## Taro ä»‹ç»

Taro æ˜¯ä¸€ä¸ªå¼€æ”¾å¼è·¨ç«¯è·¨æ¡†æ¶è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒä½¿ç”¨ React/Vue/Nerv ç­‰æ¡†æ¶æ¥å¼€å‘ å¾®ä¿¡ / äº¬ä¸œ / ç™¾åº¦ / æ”¯ä»˜å® / å­—èŠ‚è·³åŠ¨ / QQ / é£ä¹¦ å°ç¨‹åº / H5 / RN ç­‰åº”ç”¨ã€‚

å®˜æ–¹æ–‡æ¡£ï¼šhttps://taro-docs.jd.com/taro/docs/
GitHubï¼šhttps://github.com/NervJS/taro/
ç¤¾åŒºç»„ä»¶åº“ï¼šhttps://taro-docs.jd.com/taro/docs/treasures/#%E6%A0%B7%E5%BC%8F%E5%BA%93
## å®¢æˆ·ç«¯å¼€å‘
### å‰ç½®æ¡ä»¶

1. æ‚¨å·²ç»å®Œæˆäº†[æœåŠ¡ç«¯](https://github.com/devsapp/start-weapp/tree/main/src)çš„åº”ç”¨éƒ¨ç½²ã€‚

### ä½“éªŒæ­¥éª¤

1. åœ¨[å¾®ä¿¡å…¬ä¼—å¹³å°](https://mp.weixin.qq.com/)ä¸Šæ³¨å†Œå¾®ä¿¡å°ç¨‹åºã€‚
2. åœ¨[é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—](https://fcnext.console.aliyun.com/)æ§åˆ¶å°ï¼Œæ‰¾åˆ°æœåŠ¡ç«¯çš„â€œå…¬ç½‘è®¿é—®åœ°å€â€ã€‚
   ![trigger](https://img.alicdn.com/imgextra/i2/O1CN01dplLk71t4tKoO9Zcx_!!6000000005849-0-tps-2848-1358.jpg)
3. åœ¨[å¾®ä¿¡å…¬ä¼—å¹³å°](https://mp.weixin.qq.com/)çš„â€œå¼€å‘ç®¡ç†â€ - â€œå¼€å‘è®¾ç½®â€ é¡µé¢æ‰¾åˆ° AppIDï¼ˆå°ç¨‹åº IDï¼‰å’Œ AppSecretï¼ˆå°ç¨‹åºå¯†é’¥ï¼‰
   ![appid](https://img.alicdn.com/imgextra/i3/O1CN01OiePJe1ov2LXxEBsO_!!6000000005286-0-tps-2800-1364.jpg)
4. åœ¨[å¾®ä¿¡å…¬ä¼—å¹³å°](https://mp.weixin.qq.com/)çš„â€œå¼€å‘ç®¡ç†â€ - â€œå¼€å‘è®¾ç½®â€ é¡µé¢ä¸­å°†ç¬¬äºŒæ­¥ä¸­æ‰¾åˆ°çš„ â€œå…¬ç½‘è®¿é—®åœ°å€â€ æ·»åŠ åˆ°å°ç¨‹åºå¯ä»¥è®¿é—®çš„â€œrequest åˆæ³•åŸŸåâ€ä¸­ã€‚
   ![trigger](https://img.alicdn.com/imgextra/i1/O1CN01YK1lAg26FVWHqdSg5_!!6000000007632-0-tps-2160-1154.jpg)
5. ï¼ˆå¯é€‰ï¼‰å¦‚æœæ‚¨å¸Œæœ›å¯ç”¨[å°ç¨‹åºç™»å½•](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/login.html)ï¼Œä»è€Œè·å–å¾®ä¿¡ç”¨æˆ·çš„ idï¼Œä½ éœ€è¦åœ¨[é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—](https://fcnext.console.aliyun.com/)æ§åˆ¶å°ï¼Œè¿›å…¥â€œå‡½æ•°è¯¦æƒ…â€-> â€œå‡½æ•°é…ç½®â€ é¡µé¢æ‰¾åˆ°â€œç¯å¢ƒå˜é‡â€ï¼Œç„¶åç‚¹å‡»â€œç¼–è¾‘â€ã€‚å¹¶æ·»åŠ åç§°ä¸º`APP_ID` å’Œ `SECRET` çš„ç¯å¢ƒå˜é‡ï¼Œå¯¹åº”çš„å€¼ä¸ºæ‚¨çš„å°ç¨‹åº ID å’Œå°ç¨‹åºå¯†é’¥ã€‚ç„¶åç‚¹å‡»â€œä¿å­˜â€ã€‚
   ![update-env](https://img.alicdn.com/imgextra/i4/O1CN01K57K5c1QqPZKsVMEx_!!6000000002027-0-tps-2842-1362.jpg)
6. æ›´æ–°æœ¬åœ°ä»£ç åº“ä¸­ `project.config.json` ä¸­çš„ `appid` ä¸ºæ‚¨çš„å°ç¨‹åº IDã€‚
7. æ›´æ–°æœ¬åœ°ä»£ç åº“ä¸­ `config/prod.js` ä¸­çš„ `API_HOST` è®¾ç½®ä¸ºä¸Šä¸€æ­¥ä¸­æ‰¾åˆ°çš„â€œå…¬ç½‘è®¿é—®åœ°å€â€ã€‚æ³¨æ„ï¼Œè¿™é‡Œè¦ä¿ç•™`'"xxx"'`è¿™ç§å•å¼•å·ï¼ŒåŒå¼•å·çš„å†™æ³•ã€‚
8. è¿›å…¥ `weapp-client` ç›®å½•ï¼Œè¿è¡Œ `npm install` å®‰è£…ä¾èµ–ã€‚
9. è¿è¡Œ `npm run build`
10. ä¸‹è½½å¹¶å®‰è£…[å¾®ä¿¡å¼€å‘è€…å·¥å…·](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)ï¼Œç”¨äºå‘å¸ƒå°ç¨‹åºå®¢æˆ·ç«¯ã€‚
11. æ‰“å¼€[å¾®ä¿¡å¼€å‘è€…å·¥å…·](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)ï¼Œå¹¶é€‰æ‹©æˆ‘ä»¬çš„ä»£ç åº“ã€‚
    ![open](https://img.alicdn.com/imgextra/i1/O1CN0136I9eU24lRuW248Xg_!!6000000007431-0-tps-1672-952.jpg)
12. ä¸Šä¼ æ‚¨çš„å°ç¨‹åºå®¢æˆ·ç«¯ä»£ç ã€‚ç‰ˆæœ¬å·å¯ä»¥ä¸º `1.0.0`
    ![upload](https://img.alicdn.com/imgextra/i2/O1CN010KeoC11iBnX7dbkog_!!6000000004375-0-tps-2540-1290.jpg)
13. åœ¨[å¾®ä¿¡å…¬ä¼—å¹³å°](https://mp.weixin.qq.com/)çš„â€œç‰ˆæœ¬ç®¡ç†â€é¡µé¢ä¸­ï¼Œè®¾ç½®ä¸ºä½“éªŒç‰ˆæœ¬ã€‚
    ![version](https://img.alicdn.com/imgextra/i3/O1CN011Aldji1w3SwrwnwOu_!!6000000006252-0-tps-2142-918.jpg)
14. ç”¨æ‰‹æœºæ‰«æä½“éªŒäºŒç»´ç ï¼Œå¼€å§‹ä½“éªŒï¼
    ![scan](https://img.alicdn.com/imgextra/i3/O1CN01xISaug1Laly04AXhw_!!6000000001316-0-tps-1804-1506.jpg)
15. æ‚¨ä¹Ÿå¯ä»¥åœ¨[å¾®ä¿¡å…¬ä¼—å¹³å°](https://mp.weixin.qq.com/)çš„â€œæˆå‘˜ç®¡ç†â€é¡µé¢ä¸­ï¼Œæ·»åŠ æ›´å¤šä½“éªŒæˆå‘˜æ¥ä½¿ç”¨è¿™ä¸ª Demoã€‚

### æœ¬åœ°å¼€å‘

1. æ›´æ–°æœ¬åœ°ä»£ç åº“ä¸­ `config/dev.js` ä¸­çš„ `API_HOST` è®¾ç½®ä¸ºä¸Šä¸€æ­¥ä¸­æ‰¾åˆ°çš„â€œå…¬ç½‘è®¿é—®åœ°å€â€æˆ–æ‚¨æœ¬åœ° API çš„åœ°å€ã€‚æ³¨æ„ï¼Œè¿™é‡Œè¦ä¿ç•™`'"xxx"'`è¿™ç§å•å¼•å·ï¼ŒåŒå¼•å·çš„å†™æ³•ã€‚
2. æ‰“å¼€æ‚¨çš„å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œç„¶ååœ¨æœ¬åœ°å‘½ä»¤è¡Œä¸­è¿è¡Œ `npm run dev`
3. å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ä¼šæ˜¾ç¤ºæ‚¨çš„å°ç¨‹åºã€‚ä¿®æ”¹ä»£ç åï¼Œå¼€å‘è€…å·¥å…·ä¼šè‡ªåŠ¨åˆ·æ–°ã€‚
4. å¦‚æœæ‚¨æƒ³å¼€å‘æ”¯ä»˜å®ç­‰å…¶ä»–å°ç¨‹åºï¼Œè¯·å‚è€ƒ[Taro](https://taro-docs.jd.com/taro/docs/)æ–‡æ¡£å’Œ`package.json`ä¸­çš„å‘½ä»¤ã€‚

> - Taro å®˜æ–¹æ–‡æ¡£ï¼šhttps://taro-docs.jd.com/taro/docs/
> - Taro GitHubï¼šhttps://github.com/NervJS/taro/
> - Taro ç¤¾åŒºç»„ä»¶åº“ï¼šhttps://taro-docs.jd.com/taro/docs/treasures/#%E6%A0%B7%E5%BC%8F%E5%BA%93
### æœ¬åœ°æ„å»º

è¿è¡Œ `npm run build` å°†è¿›è¡Œæ„å»ºï¼Œç„¶åæ‚¨å¯ä»¥åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ç‚¹å‡»â€œä¸Šä¼ â€å‘å¸ƒæ‚¨æ‰“åŒ…å¥½çš„å°ç¨‹åºã€‚

æ³¨æ„ï¼šå¦‚æœæ‚¨åœ¨æ‰‹æœºä¸Šå‘ç°ç‰ˆæœ¬æ²¡æœ‰æ›´æ–°ï¼Œæ‚¨éœ€è¦åœ¨æ‰‹æœºåå°åœæ­¢å¾®ä¿¡ï¼Œé‡æ–°å¯åŠ¨å¾®ä¿¡ã€‚

> - Serverless Devs é¡¹ç›®ï¼šhttps://www.github.com/serverless-devs/serverless-devs
> - Serverless Devs æ–‡æ¡£ï¼šhttps://www.github.com/serverless-devs/docs
> - Serverless Devs é’‰é’‰äº¤æµç¾¤ï¼š33947367

> npm install -g @tarojs/cli
æ‰¾ä¸åˆ°ä¾èµ– "@tarojs/plugin-platform-weapp"ï¼Œè¯·å…ˆåœ¨é¡¹ç›®ä¸­å®‰è£…  -- ä½¿ç”¨npmå®‰è£…å°±ä¸ä¼šå‡ºç°


# å¼€å‘
> æ¯ä¸€ä¸ª Taro åº”ç”¨éƒ½éœ€è¦ä¸€ä¸ªå…¥å£ç»„ä»¶ï¼ˆReact ç»„ä»¶ï¼‰ç”¨æ¥æ³¨å†Œåº”ç”¨ã€‚å…¥å£æ–‡ä»¶é»˜è®¤æ˜¯ src ç›®å½•ä¸‹çš„ app.js

åœ¨å…¥å£ç»„ä»¶ä¸­æˆ‘ä»¬å¯ä»¥è®¾ç½®å…¨å±€çŠ¶æ€æˆ–è®¿é—®å°ç¨‹åºå…¥å£å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸã€‚

npm update @tarojs/components @tarojs/runtime @tarojs/taro @tarojs/plugin-framework-react react-dom react @tarojs/mini-runner @tarojs/webpack-runner @types/react @types/webpack-env

npm update @tarojs/taro
```sh
npm outdated
# æ£€æŸ¥æ›´æ–°
npm i -g npm-check-updates
# ä½¿ç”¨
npm-check-updates
# ç®€å†™
ncu
# æ›´æ–°å…¨éƒ¨æ¨¡å—
ncu -u
```
```sh
IOLOI@IOLOII MINGW64 /d/program/workspace/Other/ali-serverless-wxapp-client (main)
@tarojs/components                  3.4.3    3.4.3    3.5.7  hello
@tarojs/mini-runner                 3.4.3    3.4.3    3.5.7  hello
@tarojs/plugin-framework-react      3.4.3    3.4.3    3.5.7  hello
@tarojs/react                       3.4.3    3.4.3    3.5.7  hello
@tarojs/runtime                     3.4.3    3.4.3    3.5.7  hello
@tarojs/taro                        3.4.3    3.4.3    3.5.7  hello
@tarojs/webpack-runner              3.4.3    3.4.3    3.5.7  hello
@types/react                      17.0.52  17.0.52  18.0.24  hello
@typescript-eslint/eslint-plugin   4.33.0   4.33.0   5.41.0  hello
@typescript-eslint/parser          4.33.0   4.33.0   5.41.0  hello
babel-preset-taro                   3.4.3    3.4.3    3.5.7  hello
eslint                              6.8.0    6.8.0   8.26.0  hello
eslint-config-taro                  3.4.3    3.4.3    3.5.7  hello
react                              17.0.2   17.0.2   18.2.0  hello
react-dom                          17.0.2   17.0.2   18.2.0  hello
```
```
$ ncu -u
Upgrading D:\program\workspace\Other\ali-serverless-wxapp-client\package.json
 @tarojs/plugin-framework-react      3.4.3  â†’     3.5.7
 @tarojs/react                       3.4.3  â†’     3.5.7
 @tarojs/runtime                     3.4.3  â†’     3.5.7
 @tarojs/taro                        3.4.3  â†’     3.5.7
 @tarojs/webpack-runner              3.4.3  â†’     3.5.7
 @types/react                      ^17.0.2  â†’  ^18.0.24
 @types/webpack-env                ^1.13.6  â†’   ^1.18.0
 @typescript-eslint/eslint-plugin  ^4.15.1  â†’   ^5.41.0
 @typescript-eslint/parser         ^4.15.1  â†’   ^5.41.0
 babel-preset-taro                   3.4.3  â†’     3.5.7
 eslint                             ^6.8.0  â†’   ^8.26.0
 eslint-config-taro                  3.4.3  â†’     3.5.7
 eslint-plugin-import              ^2.12.0  â†’   ^2.26.0
 eslint-plugin-react                ^7.8.2  â†’  ^7.31.10
 eslint-plugin-react-hooks          ^4.2.0  â†’    ^4.6.0
 react                             ^17.0.0  â†’   ^18.2.0
 react-dom                         ^17.0.0  â†’   ^18.2.0
 stylelint                         ^14.4.0  â†’  ^14.14.0
 typescript                         ^4.1.0  â†’    ^4.8.4

Run npm install to install new versions.
```

```sh
npm ci # npm ERR! cipm can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.
```

## å¼€å‘ç‰ˆæœ¬å·®å¼‚
[å„ç«¯å¼€å‘å‰æ³¨æ„tarojs@v1](https://taro-docs.jd.com/docs/1.x/before-dev-remind)
* **RN ä¸­ View æ ‡ç­¾é»˜è®¤ä¸»è½´æ–¹å‘æ˜¯ columnï¼Œå¦‚æœä¸å°†å…¶ä»–ç«¯æ”¹æˆä¸ RN ä¸€è‡´ï¼Œå°±éœ€è¦åœ¨æ‰€æœ‰ç”¨åˆ° display: flex çš„åœ°æ–¹éƒ½æ˜¾å¼å£°æ˜ä¸»è½´æ–¹å‘ã€‚**
* å¦‚æœè¦æ”¯æŒ React Native ç«¯ï¼Œå¿…é¡»é‡‡ç”¨ Flex å¸ƒå±€ï¼Œå¹¶ä¸”æ ·å¼é€‰æ‹©å™¨ä»…æ”¯æŒç±»é€‰æ‹©å™¨ [è·¨ç«¯æ ·å¼å†™æ³•](https://taro-docs.jd.com/docs/1.x/before-dev-remind#%E6%A0%B7%E5%BC%8F%E4%BB%A3%E7%A0%81%E7%9A%84%E6%9D%A1%E4%BB%B6%E7%BC%96%E8%AF%91)
* å…¥å£æ–‡ä»¶ app.js é‡Œé¢å¼•å…¥çš„æ ·å¼å°±æ˜¯å…¨å±€æ ·å¼ï¼Œæœ¬åœ°æ ·å¼ä¼šè¦†ç›–å…¨å±€æ ·å¼ã€‚
* box-shadow å¾ˆé—æ†¾ï¼ŒReact Native è¿™æ–¹é¢æ”¯æŒå¾—å¹¶ä¸å¥½ï¼ˆä»… ios æ”¯æŒä¸”æ”¯æŒç¨‹åº¦æœ‰é™ï¼‰ï¼Œå»ºè®®ä½ ä¸è¦æŠ¥å¤ªå¤§å¸Œæœ›ã€‚
* border{Top,Right,Bottom,Left} ä¸æ”¯æŒ
* React Native ä¸æ”¯æŒ background-image ï¼Œé˜…è¯»ä¸€ä¸‹è¿™ç¯‡æ–‡ç« ï¼š[Background Images in React Native](https://thekevinscott.com/background-images-in-react-native/)ï¼Œæœ‰åŠ©äºä½ ç†è§£ã€‚
* [å¸¸ç”¨æ ‡ç­¾æ”¯æŒå±æ€§](https://taro-docs.jd.com/docs/1.x/before-dev-remind#properties-%E5%B1%9E%E6%80%A7)

## ä¹¦å†™è§„èŒƒ
### ä¹¦å†™
* ä¸¤ä¸ªç©ºæ ¼è¿›è¡Œç¼©è¿›
* ä¸è¦åœ¨å¥æœ«ä½¿ç”¨åˆ†å·
* å­—ç¬¦ä¸²ç»Ÿä¸€ä½¿ç”¨å•å¼•å·
    > console.log('hello there')
    // å¦‚æœé‡åˆ°éœ€è¦è½¬ä¹‰çš„æƒ…å†µï¼Œè¯·æŒ‰å¦‚ä¸‹ä¸‰ç§å†™æ³•ä¹¦å†™
    const x = 'hello "world"'
    const y = 'hello \'world\''
    const z = `hello 'world'
* å…³é”®å­—åé¢åŠ ç©ºæ ¼
    > if (condition) { ... }   // âœ“ æ­£ç¡®
    if(condition) { ... }    // âœ— é”™è¯¯
* åœ†æ‹¬å·é—´ä¸ç•™ç©ºæ ¼
    > getName( name )     // âœ— é”™è¯¯
    getName(name)       // âœ“ æ­£ç¡®
* æ³¨é‡Šé¦–å°¾ç•™ç©ºæ ¼
    > //comment           // âœ— é”™è¯¯
    // comment          // âœ“ æ­£ç¡®
    /*comment*/         // âœ— é”™è¯¯
    /* comment */       // âœ“ æ­£ç¡®
* æ¨¡æ¿å­—ç¬¦ä¸²ä¸­å˜é‡å‰åä¸åŠ ç©ºæ ¼
    > const message = `Hello, ${ name }`    // âœ— é”™è¯¯
    const message = `Hello, ${name}`      // âœ“ æ­£ç¡®
* é€—å·åé¢åŠ ç©ºæ ¼
* å•è¡Œä»£ç å—ä¸¤è¾¹åŠ ç©ºæ ¼
    > function foo () {return true}    // âœ— é”™è¯¯
    function foo () { return true }  // âœ“ æ­£ç¡®
    if (condition) { return true }  // âœ“ æ­£ç¡®
* é”®å€¼å¯¹å½“ä¸­å†’å·ä¸å€¼ä¹‹é—´è¦ç•™ç©ºç™½
    > const obj = { 'key' : 'value' }    // âœ— é”™è¯¯
    const obj = { 'key' :'value' }     // âœ— é”™è¯¯
    const obj = { 'key':'value' }      // âœ— é”™è¯¯
    const obj = { 'key': 'value' }     // âœ“ æ­£ç¡®
* ä½¿ç”¨ const/let å®šä¹‰å˜é‡ ï¼ˆä¾§é¢æ„æ€ä¸è¦varï¼‰
* æ¯ä¸ª const/let å…³é”®å­—å•ç‹¬å£°æ˜ä¸€ä¸ªå˜é‡
* ä¸è¦ä½¿ç”¨ undefined æ¥åˆå§‹åŒ–å˜é‡
    > let name = undefined    // âœ— é”™è¯¯
    \---
    let name
    name = 'value'          // âœ“ æ­£ç¡®
* å¯¹äºå˜é‡å’Œå‡½æ•°åç»Ÿä¸€ä½¿ç”¨é©¼å³°å‘½åæ³•
    > function my_function () { }    // âœ— é”™è¯¯
    function myFunction () { }     // âœ“ æ­£ç¡®
    \---
    const my_var = 'hello'           // âœ— é”™è¯¯
    const myVar = 'hello'            // âœ“ æ­£ç¡®
* å­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œç¬¦ (Infix operators) ä¹‹é—´è¦ç•™ç©ºæ ¼
    > // âœ“ æ­£ç¡®
    const x = 2
    const message = 'hello, ' + name + '!'
    \---
    // âœ— é”™è¯¯
    const x=2
    const message = 'hello, '+name+'!'
* ä¸è¦ä½¿ç”¨å¤šè¡Œå­—ç¬¦ä¸²
* æ£€æŸ¥ NaN çš„æ­£ç¡®å§¿åŠ¿æ˜¯ä½¿ç”¨ isNaN()
* ç”¨åˆæ³•çš„å­—ç¬¦ä¸²è·Ÿ typeof è¿›è¡Œæ¯”è¾ƒæ“ä½œ
    > typeof name === undefined       // âœ— é”™è¯¯
    typeof name === 'undefined'     // âœ“ æ­£ç¡®
* ä¸è¦ä½¿ç”¨ eval()
* æ³¨æ„éšå¼çš„ eval()
    > setTimeout("alert('Hello world')")                   // âœ— é”™è¯¯ - ä¼šè¿è¡Œalert
    setTimeout(function () { alert('Hello world') })     // âœ“ æ­£ç¡®
* åµŒå¥—çš„ä»£ç å—ä¸­ç¦æ­¢å†å®šä¹‰å‡½æ•°
* è‡ªè°ƒç”¨åŒ¿åå‡½æ•° (IIFEs) ä½¿ç”¨æ‹¬å·åŒ…è£¹
    > const getName = function () { }()     // âœ— é”™è¯¯
    \---
    const getName = (function () { }())   // âœ“ æ­£ç¡®
    const getName = (function () { })()   // âœ“ æ­£ç¡®
<!-- ç±»ç›¸å…³ -->
* ç±»åè¦ä»¥å¤§å†™å­—æ¯å¼€å¤´
* å­ç±»çš„æ„é€ å™¨ä¸­ä¸€å®šè¦è°ƒç”¨ super
* ä½¿ç”¨ this å‰è¯·ç¡®ä¿ super() å·²è°ƒç”¨
    ```js
    class Dog extends Animal {
        constructor () {
            this.legs = 4     // âœ— é”™è¯¯
            super()
        }
    }
    ```
* æ— å‚çš„æ„é€ å‡½æ•°è°ƒç”¨æ—¶è¦å¸¦ä¸Šæ‹¬å·

* é¿å…åœ¨ return è¯­å¥ä¸­å‡ºç°èµ‹å€¼è¯­å¥
* returnï¼Œthrowï¼Œcontinue å’Œ break åä¸è¦å†è·Ÿä»£ç 
* å§‹ç»ˆä½¿ç”¨ === æ›¿ä»£ ==
* if/else å…³é”®å­—è¦ä¸èŠ±æ‹¬å·ä¿æŒåœ¨åŒä¸€è¡Œ
* å¯¹äºä¸‰å…ƒè¿ç®—ç¬¦ ? å’Œ : ä¸ä»–ä»¬æ‰€è´Ÿè´£çš„ä»£ç å¤„äºåŒä¸€è¡Œ
    ```js
    // âœ“ æ­£ç¡®
    const location = env.development ? 'localhost' : 'www.api.com'

    // âœ“ æ­£ç¡®
    const location = env.development
    ? 'localhost'
    : 'www.api.com'

    // âœ— é”™è¯¯
    const location = env.development ?
    'localhost' :
    'www.api.com'
    ```
* å¦‚æœæœ‰æ›´å¥½çš„å®ç°ï¼Œå°½é‡ä¸è¦ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼
* ç”¨ throw æŠ›é”™æ—¶ï¼ŒæŠ›å‡º Error å¯¹è±¡è€Œä¸æ˜¯å­—ç¬¦ä¸²
    ```js
    throw 'error'               // âœ— é”™è¯¯
    throw new Error('error')    // âœ“ æ­£ç¡®
    ```
* ä½¿ç”¨ Promise ä¸€å®šè¦æ•æ‰é”™è¯¯

### ç»„ä»¶åŠ JSX ä¹¦å†™è§„èŒƒ
> Taro ä¸­ç»„ä»¶ä»¥ç±»çš„å½¢å¼è¿›è¡Œåˆ›å»ºï¼Œå¹¶ä¸”å•ä¸ªæ–‡ä»¶ä¸­åªèƒ½å­˜åœ¨å•ä¸ªç»„ä»¶

* ç»ˆå§‹åœ¨è‡ªé—­åˆæ ‡ç­¾å‰é¢æ·»åŠ ä¸€ä¸ªç©ºæ ¼
* å±æ€§åç§°å§‹ç»ˆä½¿ç”¨é©¼å³°å‘½åæ³•
* ç”¨æ‹¬å·åŒ…è£¹å¤šè¡Œ JSX æ ‡ç­¾
    ```jsx
    // bad
    render () {
        return <MyComponent className='long body' foo='bar'>
                <MyChild />
              </MyComponent>
    }

    // good
    render () {
        return (
            <MyComponent className='long body' foo='bar'>
                <MyChild />
            </MyComponent>
        )
    }

    // good
    render () {
        const body = <div>hello</div>
        return <MyComponent>{body}</MyComponent>
    }
    ```
* å½“æ ‡ç­¾æ²¡æœ‰å­å…ƒç´ æ—¶ï¼Œå§‹ç»ˆä½¿ç”¨è‡ªé—­åˆæ ‡ç­¾
* ä¹¦å†™é¡ºåº
    > åœ¨ Taro ç»„ä»¶ä¸­ä¼šåŒ…å«ç±»é™æ€å±æ€§ã€ç±»å±æ€§ã€ç”Ÿå‘½å‘¨æœŸç­‰çš„ç±»æˆå‘˜ï¼Œå…¶ä¹¦å†™é¡ºåºæœ€å¥½éµå¾ªä»¥ä¸‹çº¦å®šï¼ˆé¡ºåºä»ä¸Šè‡³ä¸‹ï¼‰
    1. static é™æ€æ–¹æ³•
    2. constructor
    3. componentWillMount
    4. componentDidMount
    5. componentWillReceiveProps
    6. shouldComponentUpdate
    7. componentWillUpdate
    8. componentDidUpdate
    9. componentWillUnmount
    10. ç‚¹å‡»å›è°ƒæˆ–è€…äº‹ä»¶å›è°ƒ æ¯”å¦‚ onClickSubmit() æˆ–è€… onChangeDescription()
    11. 0render
* ä¸è¦åœ¨è°ƒç”¨ this.setState æ—¶ä½¿ç”¨ this.state
    > ç”±äº this.setState å¼‚æ­¥çš„ç¼˜æ•…ï¼Œè¿™æ ·çš„åšæ³•ä¼šå¯¼è‡´ä¸€äº›é”™è¯¯ï¼Œå¯ä»¥é€šè¿‡ç»™ this.setState ä¼ å…¥å‡½æ•°æ¥é¿å…
    ```js
    this.setState({
        value: this.state.value + 1
    })   // âœ— é”™è¯¯

    this.setState(prevState => ({ value: prevState.value + 1 }))    // âœ“ æ­£ç¡®
    ```
* map å¾ªç¯æ—¶è¯·ç»™å…ƒç´ åŠ ä¸Š key å±æ€§
* å°½é‡é¿å…åœ¨ componentDidMount ä¸­è°ƒç”¨ this.setState
    > å› ä¸ºåœ¨ componentDidMount ä¸­è°ƒç”¨ this.setState ä¼šå¯¼è‡´è§¦å‘æ›´æ–°
* ä¸è¦åœ¨ componentWillUpdate/componentDidUpdate/render ä¸­è°ƒç”¨ this.setState
    ```js
    import Taro, { Component } from '@tarojs/taro'
    import { View, Input } from '@tarojs/components'

    class MyComponent extends Component {
    state = {
        myTime: 12
    }

    componentWillUpdate () {
        this.setState({     // âœ— é”™è¯¯
        name: 1
        })
    }

    componentDidUpdate () {
        this.setState({     // âœ— é”™è¯¯
        name: 1
        })
    }

    render () {
        const { isEnable } = this.props
        const { myTime } = this.state
        this.setState({     // âœ— é”™è¯¯
        name: 11
        })
        return (
        <View className='test'>
            {isEnable && <Text className='test_text'>{myTime}</Text>}
        </View>
        )
    }
    }
    ```
* ç»„ä»¶æœ€å¥½å®šä¹‰ defaultProps
    ```js
    import Taro, { Component } from '@tarojs/taro'
    import { View, Input } from '@tarojs/components'

    class MyComponent extends Component {

    static defaultProps = {
        isEnable: true
    }

    state = {
        myTime: 12
    }

    render () {
        const { isEnable } = this.props
        const { myTime } = this.state

        return (
        <View className='test'>
            {isEnable && <Text className='test_text'>{myTime}</Text>}
        </View>
        )
    }
    }
    ```
* render æ–¹æ³•å¿…é¡»æœ‰è¿”å›å€¼
* å€¼ä¸º true çš„å±æ€§å¯ä»¥çœç•¥ä¹¦å†™å€¼
* äº‹ä»¶ç»‘å®šå‡ä»¥ on å¼€å¤´
    > åœ¨ Taro ä¸­æ‰€æœ‰é»˜è®¤äº‹ä»¶å¦‚ onClickã€onTouchStart ç­‰ç­‰ï¼Œå‡ä»¥ on å¼€å¤´
* å­ç»„ä»¶ä¼ å…¥å‡½æ•°æ—¶å±æ€§åéœ€è¦ä»¥ on å¼€å¤´

### Taro è‡ªèº«é™åˆ¶è§„èŒƒ
* ä¸èƒ½ä½¿ç”¨ Array#map ä¹‹å¤–çš„æ–¹æ³•æ“ä½œ JSX æ•°ç»„
    > Taro åœ¨å°ç¨‹åºç«¯å®é™…ä¸ŠæŠŠ JSX è½¬æ¢æˆäº†å­—ç¬¦ä¸²æ¨¡æ¿ï¼Œè€Œä¸€ä¸ªåŸç”Ÿ JSX è¡¨è¾¾å¼å®é™…ä¸Šæ˜¯ä¸€ä¸ª React/Nerv å…ƒç´ (react-element)çš„æ„é€ å™¨ï¼Œå› æ­¤åœ¨åŸç”Ÿ JSX ä¸­ä½ å¯ä»¥éšæ„åœ°å¯¹ä¸€ç»„ React å…ƒç´ è¿›è¡Œæ“ä½œã€‚ä½†åœ¨ Taro ä¸­ä½ åªèƒ½ä½¿ç”¨ map æ–¹æ³•ï¼ŒTaro è½¬æ¢æˆå°ç¨‹åºä¸­ wx:for

    ä»¥ä¸‹ä»£ç ä¼šè¢« ESLint æç¤ºè­¦å‘Šï¼ŒåŒæ—¶åœ¨ Taroï¼ˆå°ç¨‹åºç«¯ï¼‰ä¹Ÿä¸ä¼šæœ‰æ•ˆï¼š
    ```js
    test.push(<View />)
    numbers.forEach(number => {
    if (someCase) {
        a = <View />
    }
    })

    test.shift(<View />)

    components.find(component => {
    return component === <View />
    })

    components.some(component => component.constructor.__proto__ === <View />.constructor)
    ```
    ä»¥ä¸‹ä»£ç ä¸ä¼šè¢«è­¦å‘Šï¼Œä¹Ÿåº”å½“åœ¨ Taro ä»»æ„ç«¯ä¸­èƒ½å¤Ÿè¿è¡Œï¼š
    ```js
    numbers.filter(Boolean).map((number) => {
        const element = <View />
        return <View />
    })
    ```
    **è§£å†³æ–¹æ¡ˆ:**
    > å…ˆå¤„ç†å¥½éœ€è¦éå†çš„æ•°ç»„ï¼Œç„¶åå†ç”¨å¤„ç†å¥½çš„æ•°ç»„è°ƒç”¨ map æ–¹æ³•ã€‚

## é…ç½®
å„ç±»å°ç¨‹åºå¹³å°å‡æœ‰è‡ªå·±çš„é¡¹ç›®é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š
å¾®ä¿¡å°ç¨‹åºï¼Œproject.config.json
ç™¾åº¦å°ç¨‹åºï¼Œproject.swan.json
å­—èŠ‚è·³åŠ¨å°ç¨‹åºï¼Œproject.config.json
QQ å°ç¨‹åºï¼Œproject.config.json
æ”¯ä»˜å®å°ç¨‹åºï¼Œmini.project.json
äº¬ä¸œå°ç¨‹åºï¼Œæš‚æ— å‘ç°
é£ä¹¦å°ç¨‹åºï¼Œproject.config.json

[ç‚¹å‡»è·³è½¬é…ç½®æŒ‡å—](https://taro-docs.jd.com/docs/project-config#:~:text=%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%EF%BC%8Cproject,%E4%B9%A6%E5%B0%8F%E7%A8%8B%E5%BA%8F%EF%BC%8Cproject.config.json)