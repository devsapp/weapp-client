## ğŸš€ ä¸€é”®éƒ¨ç½²
æ‚¨å¯ä»¥ç‚¹å‡» ç‚¹å‡»`ä¸€é”®éƒ¨ç½²`æŒ‰é’®ï¼Œè¿›è¡Œå¿«é€Ÿä½“éªŒã€‚

[![Deploy with Severless Devs](https://img.alicdn.com/imgextra/i1/O1CN01w5RFbX1v45s8TIXPz_!!6000000006118-55-tps-95-28.svg)](https://fcnext.console.aliyun.com/applications/create?template=start-weapp)

# å¾®ä¿¡å°ç¨‹åºæ¡ˆä¾‹

> å¿«é€Ÿéƒ¨ç½²å’Œä½“éªŒ Serverless æ¶æ„ä¸‹çš„ Typescript + hapi + Taro + React çš„å¾®ä¿¡å°ç¨‹åºé¡¹ç›®ã€‚

## æ‰«ç ä½“éªŒæœ€ç»ˆæ•ˆæœ

![try](https://img.alicdn.com/imgextra/i4/O1CN01anewVJ1gAlPEkkA1U_!!6000000004102-0-tps-258-258.jpg)
## æºä»£ç 

- [:octocat: æœåŠ¡ç«¯æºä»£ç ](https://github.com/devsapp/start-weapp/tree/main/src)
- [:octocat: å®¢æˆ·ç«¯æºä»£ç ](https://github.com/devsapp/weapp-client)

## Taro ä»‹ç»

Taro æ˜¯ä¸€ä¸ªå¼€æ”¾å¼è·¨ç«¯è·¨æ¡†æ¶è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒä½¿ç”¨ React/Vue/Nerv ç­‰æ¡†æ¶æ¥å¼€å‘ å¾®ä¿¡ / äº¬ä¸œ / ç™¾åº¦ / æ”¯ä»˜å® / å­—èŠ‚è·³åŠ¨ / QQ / é£ä¹¦ å°ç¨‹åº / H5 / RN ç­‰åº”ç”¨ã€‚

å®˜æ–¹æ–‡æ¡£ï¼šhttps://taro-docs.jd.com/taro/docs/
GitHubï¼šhttps://github.com/NervJS/taro/
ç¤¾åŒºç»„ä»¶åº“ï¼šhttps://taro-docs.jd.com/taro/docs/treasures/#%E6%A0%B7%E5%BC%8F%E5%BA%93
## å®¢æˆ·ç«¯å¼€å‘
### å‰ç½®æ¡ä»¶

1. æ‚¨å·²ç»å®Œæˆäº†[æœåŠ¡ç«¯](https://github.com/devsapp/start-weapp/tree/main/src)çš„åº”ç”¨éƒ¨ç½²ã€‚

### ä½“éªŒæ­¥éª¤

1. åœ¨[å¾®ä¿¡å…¬ä¼—å¹³å°](https://mp.weixin.qq.com/)ä¸Šæ³¨å†Œå¾®ä¿¡å°ç¨‹åºã€‚
2. åœ¨[é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—](https://fcnext.console.aliyun.com/)æ§åˆ¶å°ï¼Œæ‰¾åˆ°æœåŠ¡ç«¯çš„â€œå…¬ç½‘è®¿é—®åœ°å€â€ã€‚
   ![trigger](https://img.alicdn.com/imgextra/i2/O1CN01dplLk71t4tKoO9Zcx_!!6000000005849-0-tps-2848-1358.jpg)
3. åœ¨[å¾®ä¿¡å…¬ä¼—å¹³å°](https://mp.weixin.qq.com/)çš„â€œå¼€å‘ç®¡ç†â€ - â€œå¼€å‘è®¾ç½®â€ é¡µé¢æ‰¾åˆ° AppIDï¼ˆå°ç¨‹åº IDï¼‰å’Œ AppSecretï¼ˆå°ç¨‹åºå¯†é’¥ï¼‰
   ![appid](https://img.alicdn.com/imgextra/i3/O1CN01OiePJe1ov2LXxEBsO_!!6000000005286-0-tps-2800-1364.jpg)
4. åœ¨[å¾®ä¿¡å…¬ä¼—å¹³å°](https://mp.weixin.qq.com/)çš„â€œå¼€å‘ç®¡ç†â€ - â€œå¼€å‘è®¾ç½®â€ é¡µé¢ä¸­å°†ç¬¬äºŒæ­¥ä¸­æ‰¾åˆ°çš„ â€œå…¬ç½‘è®¿é—®åœ°å€â€ æ·»åŠ åˆ°å°ç¨‹åºå¯ä»¥è®¿é—®çš„â€œrequest åˆæ³•åŸŸåâ€ä¸­ã€‚
   ![trigger](https://img.alicdn.com/imgextra/i1/O1CN01YK1lAg26FVWHqdSg5_!!6000000007632-0-tps-2160-1154.jpg)
5. ï¼ˆå¯é€‰ï¼‰å¦‚æœæ‚¨å¸Œæœ›å¯ç”¨[å°ç¨‹åºç™»å½•](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/login.html)ï¼Œä»è€Œè·å–å¾®ä¿¡ç”¨æˆ·çš„ idï¼Œä½ éœ€è¦åœ¨[é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—](https://fcnext.console.aliyun.com/)æ§åˆ¶å°ï¼Œè¿›å…¥â€œå‡½æ•°è¯¦æƒ…â€-> â€œå‡½æ•°é…ç½®â€ é¡µé¢æ‰¾åˆ°â€œç¯å¢ƒå˜é‡â€ï¼Œç„¶åç‚¹å‡»â€œç¼–è¾‘â€ã€‚å¹¶æ·»åŠ åç§°ä¸º`APP_ID` å’Œ `SECRET` çš„ç¯å¢ƒå˜é‡ï¼Œå¯¹åº”çš„å€¼ä¸ºæ‚¨çš„å°ç¨‹åº ID å’Œå°ç¨‹åºå¯†é’¥ã€‚ç„¶åç‚¹å‡»â€œä¿å­˜â€ã€‚
   ![update-env](https://img.alicdn.com/imgextra/i4/O1CN01K57K5c1QqPZKsVMEx_!!6000000002027-0-tps-2842-1362.jpg)
6. æ›´æ–°æœ¬åœ°ä»£ç åº“ä¸­ `project.config.json` ä¸­çš„ `appid` ä¸ºæ‚¨çš„å°ç¨‹åº IDã€‚
7. æ›´æ–°æœ¬åœ°ä»£ç åº“ä¸­ `config/prod.js` ä¸­çš„ `API_HOST` è®¾ç½®ä¸ºä¸Šä¸€æ­¥ä¸­æ‰¾åˆ°çš„â€œå…¬ç½‘è®¿é—®åœ°å€â€ã€‚æ³¨æ„ï¼Œè¿™é‡Œè¦ä¿ç•™`'"xxx"'`è¿™ç§å•å¼•å·ï¼ŒåŒå¼•å·çš„å†™æ³•ã€‚
8. è¿›å…¥ `weapp-client` ç›®å½•ï¼Œè¿è¡Œ `npm install` å®‰è£…ä¾èµ–ã€‚
9. è¿è¡Œ `npm run build`
10. ä¸‹è½½å¹¶å®‰è£…[å¾®ä¿¡å¼€å‘è€…å·¥å…·](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)ï¼Œç”¨äºå‘å¸ƒå°ç¨‹åºå®¢æˆ·ç«¯ã€‚
11. æ‰“å¼€[å¾®ä¿¡å¼€å‘è€…å·¥å…·](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)ï¼Œå¹¶é€‰æ‹©æˆ‘ä»¬çš„ä»£ç åº“ã€‚
    ![open](https://img.alicdn.com/imgextra/i1/O1CN0136I9eU24lRuW248Xg_!!6000000007431-0-tps-1672-952.jpg)
12. ä¸Šä¼ æ‚¨çš„å°ç¨‹åºå®¢æˆ·ç«¯ä»£ç ã€‚ç‰ˆæœ¬å·å¯ä»¥ä¸º `1.0.0`
    ![upload](https://img.alicdn.com/imgextra/i2/O1CN010KeoC11iBnX7dbkog_!!6000000004375-0-tps-2540-1290.jpg)
13. åœ¨[å¾®ä¿¡å…¬ä¼—å¹³å°](https://mp.weixin.qq.com/)çš„â€œç‰ˆæœ¬ç®¡ç†â€é¡µé¢ä¸­ï¼Œè®¾ç½®ä¸ºä½“éªŒç‰ˆæœ¬ã€‚
    ![version](https://img.alicdn.com/imgextra/i3/O1CN011Aldji1w3SwrwnwOu_!!6000000006252-0-tps-2142-918.jpg)
14. ç”¨æ‰‹æœºæ‰«æä½“éªŒäºŒç»´ç ï¼Œå¼€å§‹ä½“éªŒï¼
    ![scan](https://img.alicdn.com/imgextra/i3/O1CN01xISaug1Laly04AXhw_!!6000000001316-0-tps-1804-1506.jpg)
15. æ‚¨ä¹Ÿå¯ä»¥åœ¨[å¾®ä¿¡å…¬ä¼—å¹³å°](https://mp.weixin.qq.com/)çš„â€œæˆå‘˜ç®¡ç†â€é¡µé¢ä¸­ï¼Œæ·»åŠ æ›´å¤šä½“éªŒæˆå‘˜æ¥ä½¿ç”¨è¿™ä¸ª Demoã€‚

### æœ¬åœ°å¼€å‘

1. æ›´æ–°æœ¬åœ°ä»£ç åº“ä¸­ `config/dev.js` ä¸­çš„ `API_HOST` è®¾ç½®ä¸ºä¸Šä¸€æ­¥ä¸­æ‰¾åˆ°çš„â€œå…¬ç½‘è®¿é—®åœ°å€â€æˆ–æ‚¨æœ¬åœ° API çš„åœ°å€ã€‚æ³¨æ„ï¼Œè¿™é‡Œè¦ä¿ç•™`'"xxx"'`è¿™ç§å•å¼•å·ï¼ŒåŒå¼•å·çš„å†™æ³•ã€‚
2. æ‰“å¼€æ‚¨çš„å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œç„¶ååœ¨æœ¬åœ°å‘½ä»¤è¡Œä¸­è¿è¡Œ `npm run dev`
3. å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ä¼šæ˜¾ç¤ºæ‚¨çš„å°ç¨‹åºã€‚ä¿®æ”¹ä»£ç åï¼Œå¼€å‘è€…å·¥å…·ä¼šè‡ªåŠ¨åˆ·æ–°ã€‚
4. å¦‚æœæ‚¨æƒ³å¼€å‘æ”¯ä»˜å®ç­‰å…¶ä»–å°ç¨‹åºï¼Œè¯·å‚è€ƒ[Taro](https://taro-docs.jd.com/taro/docs/)æ–‡æ¡£å’Œ`package.json`ä¸­çš„å‘½ä»¤ã€‚

> - Taro å®˜æ–¹æ–‡æ¡£ï¼šhttps://taro-docs.jd.com/taro/docs/
> - Taro GitHubï¼šhttps://github.com/NervJS/taro/
> - Taro ç¤¾åŒºç»„ä»¶åº“ï¼šhttps://taro-docs.jd.com/taro/docs/treasures/#%E6%A0%B7%E5%BC%8F%E5%BA%93
### æœ¬åœ°æ„å»º

è¿è¡Œ `npm run build` å°†è¿›è¡Œæ„å»ºï¼Œç„¶åæ‚¨å¯ä»¥åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ç‚¹å‡»â€œä¸Šä¼ â€å‘å¸ƒæ‚¨æ‰“åŒ…å¥½çš„å°ç¨‹åºã€‚

æ³¨æ„ï¼šå¦‚æœæ‚¨åœ¨æ‰‹æœºä¸Šå‘ç°ç‰ˆæœ¬æ²¡æœ‰æ›´æ–°ï¼Œæ‚¨éœ€è¦åœ¨æ‰‹æœºåå°åœæ­¢å¾®ä¿¡ï¼Œé‡æ–°å¯åŠ¨å¾®ä¿¡ã€‚

> - Serverless Devs é¡¹ç›®ï¼šhttps://www.github.com/serverless-devs/serverless-devs
> - Serverless Devs æ–‡æ¡£ï¼šhttps://www.github.com/serverless-devs/docs
> - Serverless Devs é’‰é’‰äº¤æµç¾¤ï¼š33947367

> npm install -g @tarojs/cli
æ‰¾ä¸åˆ°ä¾èµ– "@tarojs/plugin-platform-weapp"ï¼Œè¯·å…ˆåœ¨é¡¹ç›®ä¸­å®‰è£…  -- ä½¿ç”¨npmå®‰è£…å°±ä¸ä¼šå‡ºç°


# å¼€å‘
> æ¯ä¸€ä¸ª Taro åº”ç”¨éƒ½éœ€è¦ä¸€ä¸ªå…¥å£ç»„ä»¶ï¼ˆReact ç»„ä»¶ï¼‰ç”¨æ¥æ³¨å†Œåº”ç”¨ã€‚å…¥å£æ–‡ä»¶é»˜è®¤æ˜¯ src ç›®å½•ä¸‹çš„ app.js

åœ¨å…¥å£ç»„ä»¶ä¸­æˆ‘ä»¬å¯ä»¥è®¾ç½®å…¨å±€çŠ¶æ€æˆ–è®¿é—®å°ç¨‹åºå…¥å£å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸã€‚

npm update @tarojs/components @tarojs/runtime @tarojs/taro @tarojs/plugin-framework-react react-dom react @tarojs/mini-runner @tarojs/webpack-runner @types/react @types/webpack-env

npm update @tarojs/taro
```sh
npm outdated
# æ£€æŸ¥æ›´æ–°
npm i -g npm-check-updates
# ä½¿ç”¨
npm-check-updates
# ç®€å†™
ncu
# æ›´æ–°å…¨éƒ¨æ¨¡å—
ncu -u
```
```sh
IOLOI@IOLOII MINGW64 /d/program/workspace/Other/ali-serverless-wxapp-client (main)
@tarojs/components                  3.4.3    3.4.3    3.5.7  hello
@tarojs/mini-runner                 3.4.3    3.4.3    3.5.7  hello
@tarojs/plugin-framework-react      3.4.3    3.4.3    3.5.7  hello
@tarojs/react                       3.4.3    3.4.3    3.5.7  hello
@tarojs/runtime                     3.4.3    3.4.3    3.5.7  hello
@tarojs/taro                        3.4.3    3.4.3    3.5.7  hello
@tarojs/webpack-runner              3.4.3    3.4.3    3.5.7  hello
@types/react                      17.0.52  17.0.52  18.0.24  hello
@typescript-eslint/eslint-plugin   4.33.0   4.33.0   5.41.0  hello
@typescript-eslint/parser          4.33.0   4.33.0   5.41.0  hello
babel-preset-taro                   3.4.3    3.4.3    3.5.7  hello
eslint                              6.8.0    6.8.0   8.26.0  hello
eslint-config-taro                  3.4.3    3.4.3    3.5.7  hello
react                              17.0.2   17.0.2   18.2.0  hello
react-dom                          17.0.2   17.0.2   18.2.0  hello
```
```
$ ncu -u
Upgrading D:\program\workspace\Other\ali-serverless-wxapp-client\package.json
 @tarojs/plugin-framework-react      3.4.3  â†’     3.5.7
 @tarojs/react                       3.4.3  â†’     3.5.7
 @tarojs/runtime                     3.4.3  â†’     3.5.7
 @tarojs/taro                        3.4.3  â†’     3.5.7
 @tarojs/webpack-runner              3.4.3  â†’     3.5.7
 @types/react                      ^17.0.2  â†’  ^18.0.24
 @types/webpack-env                ^1.13.6  â†’   ^1.18.0
 @typescript-eslint/eslint-plugin  ^4.15.1  â†’   ^5.41.0
 @typescript-eslint/parser         ^4.15.1  â†’   ^5.41.0
 babel-preset-taro                   3.4.3  â†’     3.5.7
 eslint                             ^6.8.0  â†’   ^8.26.0
 eslint-config-taro                  3.4.3  â†’     3.5.7
 eslint-plugin-import              ^2.12.0  â†’   ^2.26.0
 eslint-plugin-react                ^7.8.2  â†’  ^7.31.10
 eslint-plugin-react-hooks          ^4.2.0  â†’    ^4.6.0
 react                             ^17.0.0  â†’   ^18.2.0
 react-dom                         ^17.0.0  â†’   ^18.2.0
 stylelint                         ^14.4.0  â†’  ^14.14.0
 typescript                         ^4.1.0  â†’    ^4.8.4

Run npm install to install new versions.
```

```sh
npm ci # npm ERR! cipm can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.
```